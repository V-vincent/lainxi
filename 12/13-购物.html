<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <div id="box">

    </div>

    <script>
        //解耦合
        function Product(data) {
            this.data=data;
            this.box=document.getElementById("box");
            this.btn=this.box.getElementsByTagName("button");
        }

        Product.prototype={
            //生成html
            createHtml:function(){
                var str="";
                for(var i=0; i<this.data.length; i++){
                    str+=this.bindHtml(data[i]);
                }
                this.box.innerHTML=str;
            },
            //绑定html
            bindHtml:function(obj){
                var str='<h1>'+obj.title+'</h1>'+
                        '<p>'+obj.price+'</p>'+
                        '<button>加入购物车</button>';
                return str;
            },
            //加入购物车
            addCart:function(){
                for(var i=0; i<this.btn.length; i++){
                    this.btn[i].onclick=function(){
                        alert("加入成功");
                        //写加入购物车的逻辑
                    }
                }
            },
            //绑定事件  所有事件都在这里调用
            bindEvent:function(){
                obj.createHtml();  //生成html
                obj.addCart();// 加入购物车
            }
        }


        //模拟假的数据，这样不用等后台接口
        var data=[
            {title:"11111111111",price:50},
            {title:"2222",price:501},
            {title:"333",price:502},
            {title:"444",price:50333333},
        ];

        var obj = new Product(data);
        obj.bindEvent();
        console.log(obj)
    </script>
</body>
</html>